<!DOCTYPE html>
<script src="tree-mirror.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="player.js"></script>
<script>
	var player = new PageMirrorPlayer();
	var init = function(){
		if(parent && parent.window != window && parent.window.init){
			parent.window.init();
		}
	};
	var before = function(){
		if(parent && parent.window != window && parent.window.before){
			parent.window.init();
		}
	};
	var update = function(){
		if(parent && parent.window != window && parent.window.update){
			parent.window.update();
		}
	}
	var after = function(){
		if(parent && parent.window != window && parent.window.after){
			parent.window.after();
		}	
	}
	init();
	var sessionId = window.location.hash.substring(1);
	var event = null;
	if(sessionId.indexOf(":") > -1){
		event = eval(sessionId.substring(sessionId.indexOf(":")+1));
		sessionId = sessionId.substring(0, sessionId.indexOf(":"))
	}
	player.play(sessionId, {event: event, before: before, update: update, after: after});
</script>